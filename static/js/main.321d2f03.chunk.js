(this.webpackJsonpbookworms=this.webpackJsonpbookworms||[]).push([[0],{218:function(e,t,n){},223:function(e,t,n){},232:function(e,t,n){e.exports=n.p+"static/media/IndaysLogo.de1409c4.png"},262:function(e,t,n){e.exports=n(467)},267:function(e,t,n){},466:function(e,t,n){},467:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),l=n.n(o),i=(n(267),n(74)),c=n(77),s=n(31),u=n(57),f=n(14),m=n(23),d=n(17),b=n(25),v=" title\nstart\nend\ncolor\nvalue\n_id\navailable\n",g="\n    _id\n    firebaseID\n    email\n    userType\n    firstName\n    lastName\n    preferences {".concat(v,"}\n    shifts {").concat(v,"}\n");function p(){var e=Object(d.a)(["\n    mutation declinePendingShift(\n        $shiftID: String!\n        ) {\n        declinePendingShift(\n            shiftID: $shiftID\n        )\n    }\n"]);return p=function(){return e},e}function h(){var e=Object(d.a)(["\n    mutation acceptPendingShift(\n        $shiftID: String!\n        ) {\n        acceptPendingShift(\n            shiftID: $shiftID\n        )\n    }\n"]);return h=function(){return e},e}function E(){var e=Object(d.a)(["\n    mutation addPendingShift(\n        $toUserID: String!,\n        $fromUserID: String!,\n        $shiftID: String!\n        ) {\n        addPendingShift(\n            toUserID: $toUserID,\n            fromUserID: $fromUserID,\n            shiftID: $shiftID\n        )\n    }\n"]);return E=function(){return e},e}function y(){var e=Object(d.a)(["\n    mutation removeTradeBoardShift(\n        $shiftID: String!,\n        $userID: String!\n        ) {\n        removeTradeBoardShift(\n            shiftID: $shiftID,\n            userID: $userID\n        )\n    }\n"]);return y=function(){return e},e}function O(){var e=Object(d.a)(["\n    mutation addTradeBoardShift(\n        $shiftID: String!,\n        $userID: String!\n        ) {\n        addTradeBoardShift(\n            shiftID: $shiftID,\n            userID: $userID\n        ){_id}\n    }\n"]);return O=function(){return e},e}function j(){var e=Object(d.a)(["\n    mutation UpdateUsersShifts($users: [UpdateUserShift!]!) {\n        updateUsersShifts(users: $users) {\n            _id\n        }\n    }\n"]);return j=function(){return e},e}var S=Object(b.b)(j()),w=Object(b.b)(O()),D=Object(b.b)(y()),x=Object(b.b)(E()),C=Object(b.b)(h()),k=Object(b.b)(p());function I(){var e=Object(d.a)(["\n    query {\n        getUsers {\n            _id\n        }\n    }\n"]);return I=function(){return e},e}function $(){var e=Object(d.a)(["\n    query {\n        getUsers {\n            ","\n        }\n    }\n"]);return $=function(){return e},e}function U(){var e=Object(d.a)(["\n    query getUserByFirebaseID($firebaseID: String!) {\n        getUserByFirebaseID(firebaseID: $firebaseID) {\n            ","\n        }\n    }\n"]);return U=function(){return e},e}function A(){var e=Object(d.a)(["\n    query getUserByID($id: String!) {\n        getUserByID(id: $id) {\n            ","\n        }\n    }\n"]);return A=function(){return e},e}var P=Object(b.b)(A(),g),T=Object(b.b)(U(),g),N=Object(b.b)($(),g),_=Object(b.b)(I()),M=r.a.createContext(),B=function(e){var t=e.children,n=Object(a.useState)(null),o=Object(f.a)(n,2),l=o[0],i=o[1];return r.a.createElement(M.Provider,{value:{user:l,setUser:function(e){return i(e)}}},t)};function L(){var e=Object(d.a)(["\n    query {\n        getBlackouts {\n            _id\n            start\n            end\n        }\n    }\n"]);return L=function(){return e},e}var z=Object(b.b)(L()),F=n(53);function H(){var e=Object(d.a)(["\n    background: linear-gradient(179.63deg, #ff7a7a -13.56%, #510808 158.3%);\n    width: 12vw;\n    height: 6vh;\n    color: white;\n    font-family: Poppins;\n    font-size: 1.2rem;\n    border-radius: 4.5vw;\n    align-self: 'flex-start';\n    justify-self: 'flex-start';\n"]);return H=function(){return e},e}function G(){var e=Object(d.a)(["\n    width: 36px;\n    height: 14px;\n    border-radius: 2px;\n    margin: 2px;\n    background: ",";\n"]);return G=function(){return e},e}function W(){var e=Object(d.a)(["\n    padding: 5px;\n    background: #fff;\n    border-radius: 1px;\n    boxshadow: '0 0 0 1px rgba(0,0,0,.1)';\n    display: inline-block;\n    cursor: pointer;\n"]);return W=function(){return e},e}function R(){var e=Object(d.a)(["\n    font-family: Poppins;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    color: #3385ff;\n    text-decoration: underline;\n"]);return R=function(){return e},e}function Y(){var e=Object(d.a)(["\n    background: linear-gradient(132.5deg, #000000 0%, #353535 59.95%);\n    border-radius: 100px;\n    width: 12vw;\n    height: 6vh;\n    color: white;\n    font-size: 16px;\n    \n    text-align: center;\n"]);return Y=function(){return e},e}function q(){var e=Object(d.a)(["\n    background: linear-gradient(180deg, #303030 0%, #060303 100%);\n    border-radius: 10px;\n    margin: 1em;\n    width: 247px;\n    height: 39px;\n    color: white;\n    font-size: 16px;\n    border: 0px;\n    text-align: center;\n"]);return q=function(){return e},e}function K(){var e=Object(d.a)(["\n    font-family: Poppins;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 18px;\n    padding: 0.5em;\n    padding-left: 3em;\n    margin: 1em;\n    color: ",";\n    background: transparent;\n    width: 20vw;\n    height: 2.3em;\n    border: none;\n    border-bottom: 1px solid;\n    &:focus {\n        border-bottom: 1px solid #1cd1a1; // <Thing> when hovered\n    }\n    border-color: ",";\n"]);return K=function(){return e},e}function V(){var e=Object(d.a)(["\n    font-family: Poppins;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 16px;\n    line-height: 30px;\n    position: relative;\n    //top: 277px;\n    color: #8c8989;\n"]);return V=function(){return e},e}function J(){var e=Object(d.a)(["\n    font-family: 'Poppins';\n    font-size: 72px;\n    font-weight: bold;\n    padding: 1%;\n    margin: 0;\n    background: linear-gradient(#ff7a7a, #510808);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n"]);return J=function(){return e},e}function X(){var e=Object(d.a)(["\n    background: white;\n    padding: 2%;\n    border: 3px solid rgba(133, 133, 133, 0.14);\n    box-shadow: 4px 4px 4px rgba(0, 0, 0, 0.45);\n    border-radius: 25px;\n"]);return X=function(){return e},e}var Q=F.a.div(X()),Z=F.a.h1(J()),ee=F.a.span(V()),te=F.a.input(K(),(function(e){return e.inputColor||"#235CB9"}),(function(e){return e.borderColor||"#C7C7C7"})),ne=F.a.button(q()),ae=F.a.button(Y()),re=(F.a.a(R()),F.a.div(W()),F.a.div(G(),(function(e){return e.color?e.color:"black"})),F.a.button(H()),n(43));function oe(e){var t=e.message,n=e.onClose;return r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:"success",onClose:n,dismissible:!0},r.a.createElement(re.a.Heading,null,"Success!"),r.a.createElement("p",null,t),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(ne,{onClick:n,variant:"outline-success"},"Okay")))}function le(e){var t=e.error,n=e.onClose;return r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:"danger",onClose:n,dismissible:!0},r.a.createElement(re.a.Heading,null,t.title),r.a.createElement("p",null,t.message),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(ne,{onClick:n,variant:"outline-success"},"Okay")))}function ie(e){var t=e.style,n=void 0===t?{height:"80vh"}:t;return r.a.createElement("div",{class:"ui segment",style:n},r.a.createElement("div",{class:"ui active loader"}),r.a.createElement("p",null))}var ce=n(96),se=n(93),ue=n.n(se),fe=n(243),me=n.n(fe);n(345),n(346),n(217);ue.a.locale("en");var de=Object(ce.c)(ue.a),be=me()(ce.a);var ve=Object(a.memo)((function(e){var t=e.events,n=void 0===t?[]:t,a=e.onSelectEvent,o=void 0===a?function(e){return console.log({event:e})}:a,l=Object(i.a)(e,["events","onSelectEvent"]);return r.a.createElement(be,Object.assign({selectable:!0,localizer:de,events:n,views:["month","week"],defaultView:ce.b.WEEK,defaultDate:new Date,onSelectEvent:o,style:{height:"80vh",width:"90%"},eventPropGetter:function(e){return{style:{backgroundColor:e.available?"darkred":e.myShift?"green":e.color,alignSelf:"center",alignContent:"center"}}},slotPropGetter:function(){return{style:{border:"none",alignItems:"center"}}},components:{event:function(e){var t=e.event;return r.a.createElement("p",{style:{color:"yellow"}},t.title)}}},l))}),(function(e,t){return!1})),ge=[];function pe(){var e=Object(d.a)(["\n    query {\n        getPendingShifts {\n            _id\n            title\n            start\n            end\n            color\n            available\n            fromUserID\n            toUserID\n        }\n    }\n"]);return pe=function(){return e},e}function he(){var e=Object(d.a)(["\n    query {\n        getTradeBoardShifts {\n            _id\n            title\n            start\n            end\n            color\n            available\n            full_user{_id}\n        }\n    }\n"]);return he=function(){return e},e}var Ee=Object(b.b)(he()),ye=Object(b.b)(pe()),Oe=n(181);var je=n(244),Se=n.n(je);n(218);function we(){var e=Object(d.a)(["\n    mutation createBlackout(\n        $start: String!,\n        $end: String!\n    ) {\n        createBlackout(\n            start: $start,\n            end: $end\n        ){_id}\n    }\n"]);return we=function(){return e},e}var De=Object(b.b)(we()),xe=[[{time:"9:00",slot:1},{time:"10:00",slot:1},{time:"11:00",slot:2},{time:"12:00",slot:2},{time:"13:00",slot:2},{time:"14:00",slot:2},{time:"15:00",slot:2},{time:"16:00",slot:2},{time:"17:00",slot:2},{time:"18:00",slot:2},{time:"19:00",slot:2},{time:"20:00",slot:2},{time:"21:00",slot:1},{time:"22:00",slot:1},{time:"22:30",slot:1}],[{time:"7:30",slot:2},{time:"8:00",slot:2},{time:"9:00",slot:2},{time:"10:00",slot:2},{time:"11:00",slot:3},{time:"12:00",slot:3},{time:"13:00",slot:3},{time:"14:00",slot:3},{time:"15:00",slot:3},{time:"16:00",slot:3},{time:"17:00",slot:3},{time:"18:00",slot:3},{time:"19:00",slot:2},{time:"20:00",slot:2},{time:"21:00",slot:2},{time:"22:00",slot:2},{time:"23:00",slot:1}],[{time:"7:30",slot:2},{time:"8:00",slot:2},{time:"9:00",slot:2},{time:"10:00",slot:2},{time:"11:00",slot:3},{time:"12:00",slot:3},{time:"13:00",slot:3},{time:"14:00",slot:3},{time:"15:00",slot:3},{time:"16:00",slot:2},{time:"17:00",slot:2},{time:"18:00",slot:2},{time:"19:00",slot:2}],[{time:"10:00",slot:2},{time:"11:00",slot:2},{time:"12:00",slot:2},{time:"13:00",slot:2},{time:"14:00",slot:2},{time:"15:00",slot:2},{time:"16:00",slot:2},{time:"17:00",slot:2}]],Ce=[xe[0],xe[1],xe[1],xe[1],xe[1],xe[2],xe[3]],ke=0,Ie=0,$e={},Ue={};function Ae(e){ke=localStorage.getItem("currentWeeklyMax")&&localStorage.getItem("currentWeeklyMax")>0?localStorage.getItem("currentWeeklyMax"):20,Ie=localStorage.getItem("currentDailyMax")&&localStorage.getItem("currentDailyMax")>0?localStorage.getItem("currentDailyMax"):7;var t=function(){var e=[];return Ce.forEach((function(t,n){e=e.concat(function(e,t){var n=function(e){return Ue[e]<Ie&&$e[e]<ke&&(Ue[e]++,$e[e]++,!0)},r=a.getUsers,o=[];r.forEach((function(e){var n=e._id,a=e.preferences,r=e.firstName;Ue[n]=0,n in $e||($e[n]=0),a.forEach((function(e){var a=e.start,l=e.end,i=e.value,c=new Date(a),s=new Date(l);c.getDay()===t&&o.push({empID:n,emp:r,startDate:c,endDate:s,value:parseInt(i)})}))}));var l=[];e.forEach((function(e,t){var a=e.time,r=e.slot,i=parseInt(a.split(":")[0]),c=parseInt(a.split(":")[1]),s=o.filter((function(e){var t=e.startDate,n=e.endDate,a=e.value;return t.getHours()<=i&&n.getHours()>=i+1&&-100!==a&&Number.isInteger(a)})),u=-1;if(0===s.length)l.push({shiftTime:{hour:i,minute:c},assigned:[]});else{s.forEach((function(e){var t=e.value;t>u&&(u=t)}));var f=s.filter((function(e){return e.value===u}));if(f.length<r){var m,d=[];for(u>=0&&(s=s.filter((function(e){var t=e.value;return 1===u?0===t:-1===t})));f.length<r&&0!==s.length;)m=Math.floor(Math.random()*s.length),d.includes(m)||(f.push(s[m]),s.splice(m,1),d.push(m))}var b={shiftTime:{hour:i,minute:c},assigned:[]};if(0===f)l.push("NOTHING HERE");else if(f.length<=r)f.forEach((function(e){n(e.empID)&&b.assigned.push(e)})),l.push(b);else if(f.length>r){var v=[];0!==t&&l[t-1].assigned.forEach((function(e){var t=e.empID;v.push(t)})),f.forEach((function(e,t){v.includes(e.empID)&&b.assigned.length<r&&n(e.empID)&&(b.assigned.push(e),f.splice(t,1))})),f.forEach((function(e,t){b.assigned.length<r&&n(e.empID)&&b.assigned.push(e)})),l.push(b)}}}));var i,c=[],s=29,u=2;return t<=2?s+=t:(s=0+t-2,u=3),l.forEach((function(e,t){var n=e.assigned,a=e.shiftTime;n.forEach((function(e){var n,r,o=!1,f=1,m=0,d=!1;if(0===t){for(;!o;)t+f<=l.length-1&&l[t+f].assigned.includes(e)?(console.log("Keep looking"),1===f&&(m=a.hour,n=a.minute),d=!0):(o=!0,r=a.hour+f,a.minute),f++;i=d?{id:e.empID,title:e.emp,start:new Date(2020,u,s,m,n,0),end:new Date(2020,u,s,r,0,0)}:{id:e.empID,title:e.emp,start:new Date(2020,u,s,a.hour,a.minute,0),end:new Date(2020,u,s,r,0,0)},c.push(i)}else if(!l[t-1].assigned.includes(e)){for(;!o;)t+f<=l.length-1&&l[t+f].assigned.includes(e)?(console.log("Keep looking"),1===f&&(m=a.hour,n=a.minute),d=!0):(o=!0,r=a.hour+f,a.minute),f++;i=d?{id:e.empID,title:e.emp,start:new Date(2020,u,s,m,n,0),end:new Date(2020,u,s,r,0,0)}:{id:e.empID,title:e.emp,start:new Date(2020,u,s,a.hour,a.minute,0),end:new Date(2020,u,s,r,0,0)},c.push(i)}}))})),c}(t,n))})),e},n=Object(m.c)(N),a=(n.loading,n.error,n.data);n.refetch,n.networkStatus;return r.a.createElement(ne,{onClick:function(){return e.todo(t())}},"Auto Populate")}var Pe=n(26);var Te=n(141),Ne=n.n(Te);n(404);function _e(){var e=Object(d.a)(["\n    mutation clockOut($location: String!, $time: String!, $email: String!) {\n        clockOut(location: $location, time: $time, email: $email)\n    }\n"]);return _e=function(){return e},e}function Me(){var e=Object(d.a)(["\n    mutation clockIn($location: String!, $time: String!, $email: String!) {\n        clockIn(location: $location, time: $time, email: $email)\n    }\n"]);return Me=function(){return e},e}function Be(){var e=Object(d.a)(["\n    mutation deleteUser($email: String!) {\n        deleteUser(email: $email)\n    }\n"]);return Be=function(){return e},e}function Le(){var e=Object(d.a)(["\n    mutation createUser(\n        $firebaseID: String!\n        $first: String!\n        $last: String!\n        $userType: String!\n        $email: String!\n\n    ) {\n        createUser(\n            firebaseID: $firebaseID\n            firstName: $first\n            lastName: $last\n            userType: $userType\n            email: $email\n        ) { "," }\n            \n    }\n"]);return Le=function(){return e},e}function ze(){var e=Object(d.a)(["\n    mutation updateUser(\n        $id: String!\n        $first: String\n        $last: String\n        $email: String\n        $preferences: [UpdateEventInput!]\n        $shifts: [UpdateEventInput!]\n    ) {\n        updateUser(\n            _id: $id\n            firstName: $first\n            lastName: $last\n            email: $email\n            preferences: $preferences\n            shifts: $shifts\n        ) { "," }\n            \n    }\n"]);return ze=function(){return e},e}var Fe,He=Object(b.b)(ze(),g),Ge=Object(b.b)(Le(),g),We=Object(b.b)(Be()),Re=Object(b.b)(Me()),Ye=Object(b.b)(_e()),qe=(n(223),[{value:-100,label:"In-Class",color:"darkred"},{value:-1,label:"Unpreferred",color:"red"},{value:0,label:"Neutral",color:"grey"},{value:1,label:"Preferred",color:"green"}]),Ke=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];var Ve=n(64),Je=n.n(Ve),Xe=n(94),Qe=n(482),Ze=n(473),et=n(246),tt=(n(411),et.initializeApp({apiKey:"AIzaSyA2L65DXh6scG1PFFRie5b3LV_a-b3vxlU",authDomain:"bookworms-80bc1.firebaseapp.com",databaseURL:"https://bookworms-80bc1.firebaseio.com",projectId:"bookworms-80bc1",storageBucket:"bookworms-80bc1.appspot.com",messagingSenderId:"123940735278"})),nt=n(185);function at(e){var t=e.containerStyle,n=void 0===t?{flexDirection:"column",display:"flex"}:t,o=e.onChange,l=void 0===o?function(e){return console.log(e)}:o,i=e.value,c=void 0===i?"":i,s=Object(a.useState)("@islander.tamucc.edu"),u=Object(f.a)(s,2),m=u[0],d=u[1],b=function(e){e.includes("@")&&""!==m?d(""):e.includes("@")||"@islander.tamucc.edu"===m||d("@islander.tamucc.edu"),l(e)};return r.a.createElement(Pe.a.Group,{style:n},r.a.createElement(Pe.a.Label,null,"Email"),r.a.createElement("div",{style:{display:"contents"}},r.a.createElement(Qe.a,{icon:"user outline",iconPosition:"left",onChange:function(e){var t=e.target.value;return b(t)},placeholder:"Email...","aria-label":"Email",autoComplete:"username",type:"text",value:c}),m.length>0&&r.a.createElement(nt.a.Append,null,r.a.createElement(nt.a.Text,null,m))),r.a.createElement(Pe.a.Text,{className:"text-muted"},"We will never share this email with anyone else."))}var rt=[{name:"Overview",path:"/overview",component:function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),o=n[0],l=n[1],c=Object(a.useState)([]),d=Object(f.a)(c,2),b=d[0],v=d[1],g=Object(a.useState)([]),p=Object(f.a)(g,2),h=p[0],E=p[1],y=Object(a.useState)(!1),O=Object(f.a)(y,2),j=O[0],S=O[1],D=Object(a.useState)(!1),x=Object(f.a)(D,2),C=x[0],k=x[1],I=Object(a.useContext)(M).user;Object(a.useEffect)((function(){if(0===o.length){var e=I.shifts.map((function(e){var t=e.start,n=e.end,a=Object(i.a)(e,["start","end"]),r=new Date(t),o=new Date(n);return Object(u.a)({start:r,end:o},a,{myShift:!0})}));l(e)}}),[o,I]);var $=Object(m.c)(z,{onError:function(e){var t=e.message;S({title:"Error Fetching Blackout Dates!",message:t})},onCompleted:function(e){var t=e.getBlackouts.map((function(e){var t=e.start,n=e.end;return{start:new Date(t),end:new Date(n)}}));t.forEach((function(e){var t=e.start,n=e.end;ge.push.apply(ge,Object(s.a)(A(t,n)))})),E(t)}}).loading,U=Object(m.c)(N,{onError:function(e){var t=e.message;S({title:"Error Fetching All Users' Shifts!",message:t})},onCompleted:function(e){var t=e.getUsers.filter((function(e){return e._id!==I._id})),n=[];t.forEach((function(e){e.shifts.forEach((function(e){e.start=new Date(e.start),e.end=new Date(e.end),n.push(Object(u.a)({},e,{myShift:!1}))}))})),v(n)}}).loading;function A(e,t){for(var n=new Array,a=e;a<=t;)n.push(new Date(a)),a=a.addDays(1);return n}Object(a.useEffect)((function(){k(!(!$&&!U))}),[U,$]),Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var P=Object(m.b)(w),T=Object(f.a)(P,1)[0];return r.a.createElement(Q,{style:{width:"95%"}},r.a.createElement("div",null,r.a.createElement(Z,{style:{textAlign:"left",position:"flex",fontSize:"3.2rem"}},"Overview"),r.a.createElement(ee,null,"Here you may view your weekly work schedule. "),r.a.createElement("br",null),r.a.createElement("br",null),j&&r.a.createElement(le,{error:j,onClose:function(){return S(!1)}}),C?r.a.createElement(ie,{style:{height:"100vh"}}):r.a.createElement(ve,{events:o.concat(b),dayPropGetter:function(e){for(var t in h){var n=A(h[t].start,h[t].end);for(var a in n)if(e.getDate()===n[a].getDate()&&e.getMonth()===n[a].getMonth()&&e.getFullYear()===n[a].getFullYear())return{style:{backgroundColor:"#000"}}}},onSelectEvent:function(e){if(e.myShift&&window.confirm("\nDo you want to drop this shift: Ok - YES, Cancel - NO"))if(ge.some((function(t){return t.toDateString()===e.start.toDateString()||t.toDateString()===e.end.toDateString()})))alert("You are unable to drop your shift on this day.");else{T({variables:{userID:I._id,shiftID:e._id}});var t=Object(s.a)(o);t.forEach((function(t){t._id===e._id&&(t.available=!0)})),l(t)}}})))}},{name:"Shift Swap",path:"/shiftswap",component:function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)([]),i=Object(f.a)(l,2),c=i[0],d=i[1],b=Object(a.useState)(!1),v=Object(f.a)(b,2),g=v[0],p=v[1],h=Object(a.useState)(!1),E=Object(f.a)(h,2),y=E[0],O=E[1],j=Object(a.useState)(!1),S=Object(f.a)(j,2),w=S[0],I=S[1],$=Object(a.useState)(!1),U=Object(f.a)($,2),A=U[0],P=U[1],T=Object(a.useState)(!1),N=Object(f.a)(T,2),_=N[0],B=N[1],L=Object(a.useContext)(M).user,z=Object(m.a)(Ee,{onCompleted:function(e){var t=e.getTradeBoardShifts;console.log({getTradeBoardShifts:t});var n=t.map((function(e){var t=e.start,n=e.end,a=new Date(t),r=new Date(n);return Object(u.a)({},e,{start:a,end:r})}));console.log({formattedShifts:n}),o(n)},onError:function(e){var t=e.message;p({title:"Unable To Load Trade Board Shifts!",message:t})}}),F=Object(f.a)(z,2),H=F[0],G=F[1].loading,W=Object(m.a)(ye,{onCompleted:function(e){var t=e.getPendingShifts.map((function(e){var t=e.start,n=e.end,a=new Date(t),r=new Date(n);return Object(u.a)({},e,{start:a,end:r})}));d(t)},onError:function(e){var t=e.message;p({title:"Error Loading Pending Shifts To Swap!",message:t})}}),R=Object(f.a)(W,2),Y=R[0],q=R[1].loading,K=Object(m.b)(D,{onError:function(e){var t=e.message;p({title:"Error Removing Shift!",message:t})},onCompleted:function(e){var t=e.removeTradeBoardShift;if(t){var a=Object(s.a)(n);a.splice(a.findIndex((function(e){var n=e._id;return t==n})),1),o(a)}}}),V=Object(f.a)(K,2),J=V[0],X=V[1].loading,te=Object(m.b)(x,{onError:function(e){var t=e.message;p({title:"Error Adding Shift!",message:t})}}),ae=Object(f.a)(te,2),ce=ae[0],se=ae[1].loading,ue=Object(m.b)(C,{onError:function(e){var t=e.message;p({title:"Error Accepting Shift Swap!",message:t})},onCompleted:function(e){var t=e.acceptPendingShift;if(t){var n=Object(s.a)(t);n.splice(n.findIndex((function(e){var n=e._id;return t==n})),1),d(n)}}}),fe=Object(f.a)(ue,2),me=fe[0],de=fe[1].loading,be=Object(m.b)(k,{onError:function(e){var t=e.message;p({title:"Error Declining Shift Swap!",message:t})},onCompleted:function(e){var t=e.declinePendingShift;if(t){var n=Object(s.a)(t);n.splice(n.findIndex((function(e){var n=e._id;return t==n})),1),d(n)}}}),ge=Object(f.a)(be,2),pe=ge[0],he=ge[1].loading;Object(a.useEffect)((function(){"Admin"===L.userType?Y():"Employee"===L.userType&&H()}),[Y,H,L]),Object(a.useEffect)((function(){O(!!(G||q||X||se||de||he))}),[G,q,X,se,de,he]),Object(a.useEffect)((function(){_&&!A&&("Admin"===L.userType?P({title:"Confirm Shift Swap",message:"Do you approve of this shift being picked up?"}):P({title:"Pick Up Shift",message:"Do you want to pickup this shift?"}))}),[A,_,L.userType]);var je=function(){ce({variables:{toUserID:L._id,fromUserID:_.full_user._id,shiftID:_._id}}),P(!1),B(!1)},Se=function(){J({variables:{shiftID:_._id,userID:L._id}}),P(!1),B(!1)},we=function(){console.log(_),me({variables:{shiftID:_._id}}),P(!1),B(!1)},De=function(){pe({variables:{shiftID:_._id}}),P(!1),B(!1)};return r.a.createElement(Q,{style:{width:"95%"}},r.a.createElement("div",null,r.a.createElement(Z,{style:{textAlign:"left",position:"flex",fontSize:"3.2rem"}},"Shiftswap"),r.a.createElement(ee,null,"Make requests to exchange shifts with other employees. "),r.a.createElement("br",null),r.a.createElement("br",null),w&&r.a.createElement(oe,{message:w,onClose:function(){return I(!1)}}),g&&r.a.createElement(le,{error:g,onClose:function(){return p(!1)}}),y?r.a.createElement(ie,null):function(){var e=[];return"Admin"===L.userType?e=c:"Employee"===L.userType&&(e=n),r.a.createElement(ve,{events:e,onSelectEvent:function(e){return B(e)}})}(),A&&function(){var e,t;return"Admin"===L.userType?(e=we,t=De):"Employee"===L.userType&&(e=je,t=Se),r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:"info",onClose:function(){P(!1),B(!1)},dismissible:!0},r.a.createElement(re.a.Heading,null,A.title),r.a.createElement("p",null,A.message),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:"flex",fliexDirection:"row",justifyContent:"space-around",alignItems:"center"}},r.a.createElement(Oe.a,{onClick:e,variant:"outline-success",style:{height:"4.1vh",width:"30%",marginRight:"5%"}},"Approve"),r.a.createElement(Oe.a,{onClick:t,variant:"outline-danger",style:{height:"4vh",width:"30%"}},"Disapprove"),r.a.createElement(ne,{onClick:function(){P(!1),B(!1)}},"Cancel")))}()))}},{name:"Statistics",path:"/statistics",component:function(e){return r.a.createElement("div",{style:{textAlign:"center",position:"flex"}},r.a.createElement(Z,{style:{fontSize:"48px"}},"Statistics"),r.a.createElement(ee,null,"Statistics content is under construction."))}},{name:"Schedule",path:"/schedule",component:function(e){var t=Object(a.useState)([]),n=Object(f.a)(t,2),o=n[0],l=n[1],c=Object(a.useState)("red"),d=Object(f.a)(c,2),b=d[0],v=(d[1],Object(a.useState)(!1)),g=Object(f.a)(v,2),p=(g[0],g[1],Object(a.useState)("")),h=Object(f.a)(p,2),E=h[0],y=h[1],O=Object(a.useState)(""),j=Object(f.a)(O,2),w=j[0],D=j[1],x=Object(a.useState)([]),C=Object(f.a)(x,2),k=C[0],I=C[1],$=Object(a.useState)([]),U=Object(f.a)($,2),A=U[0],T=U[1],N=Object(a.useState)(localStorage.getItem("currentWeeklyMax")||0),B=Object(f.a)(N,2),L=B[0],F=B[1],H=Object(a.useState)(localStorage.getItem("currentDailyMax")||0),G=Object(f.a)(H,2),W=G[0],R=G[1],Y=Object(a.useContext)(M).user,q=Object(m.b)(De),K=Object(f.a)(q,1)[0],V=Object(m.b)(S),J=Object(f.a)(V,1)[0],X=Object(m.c)(P,{variables:{id:Y._id},notifyOnNetworkStatusChange:!0}),te=X.loading,ae=X.error,re=(X.data,X.refetch,X.networkStatus),oe=Object(m.c)(_),le=(oe.loading,oe.error,oe.data,oe.refetch,oe.networkStatus,Object(m.c)(z)),ie=le.loading,ce=le.error,se=le.data;le.refetch,le.networkStatus,Object(a.useEffect)((function(){l([{title:"EXAMPLE Employee 1",start:new Date(2020,1,23,5),end:new Date(2020,1,23,18),color:"#fc0373"},{title:"EXAMPLE Employee 3",start:new Date(2020,1,25,10),end:new Date(2020,1,25,16),color:"#18fc03"}]);ie||ce||function(e){var t=[];e.getBlackouts.forEach((function(e){var n=e.start,a=e.end,r=new Date(n),o=new Date(a);t.push({start:r,end:o})})),T(t)}(se)}),[ie,se,ce]);var ue=function(e){var t=e.event,n=e.start,a=e.end,r=t.title,i=t.color,c=o.filter((function(e){return e!==t}));c.push({title:r,start:n,end:a,color:i}),l(c)},fe=function(e){var t=e.event,n=e.start,a=e.end,r=o.indexOf(t),i=t.title,c=t.color,u=Object(s.a)(o);u[r]={title:i,color:c,start:n,end:a},l(u)},me=function(e){for(var t in A){var n=A[t].start,a=A[t].end;Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var r=function(e,t){for(var n=new Array,a=e;a<=t;)n.push(new Date(a)),a=a.addDays(1);return n}(n,a);for(var o in r)if(e.getDate()===r[o].getDate()&&e.getMonth()===r[o].getMonth()&&e.getFullYear()===r[o].getFullYear())return{style:{backgroundColor:"#000"}}}};return te?r.a.createElement("p",null,"Loading..."):ae?r.a.createElement("p",null,"Error :( ",JSON.stringify(ae)):4===re?r.a.createElement("p",null,"Refetching..."):r.a.createElement(Q,{style:{width:"95%"}},r.a.createElement("div",null,r.a.createElement(Z,{style:{textAlign:"left",position:"flex",fontSize:"3.2rem"}},"Schedule"),r.a.createElement(ee,null," View both the Blackout Calendar and Create Auto-Populated Calendars. "),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Blackout Calendar"),r.a.createElement(ee,null," Here you may set new Blackout dates to the Calendar."),r.a.createElement("br",null),r.a.createElement("br",null),function(){var e=function(e,t){return r.a.createElement(Se.a,{selected:e,onSelect:function(e){return t(e)},minDate:e===w&&E,maxDate:e===E&&w})};return r.a.createElement("div",{style:{display:"flex",alignItems:"left",flexDirection:"column",justifyContent:"center"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h4",null,"Blackout Start ",r.a.createElement("br",null)," ",e(E,y)),r.a.createElement("h4",null,"Blackout End ",r.a.createElement("br",null)," ",e(w,D))))}(),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(ne,{style:{align:"left"},onClick:function(e){K({variables:{start:E.toISOString(),end:w.toISOString()}})}},"Submit Blackouts To Database")),r.a.createElement(ve,{events:o,dayPropGetter:me,eventPropGetter:function(e){return{style:{backgroundColor:e.color,alignSelf:"center",alignContent:"center"}}},onEventDrop:ue,onEventResize:fe}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h3",null,"Auto Population Calendar"),r.a.createElement(ee,null,"Generate new work Calendars with the Auto Population feature."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("h2",null,"Hours"),r.a.createElement(Pe.a,null,r.a.createElement(Pe.a.Group,null,r.a.createElement(Pe.a.Label,{sm:2},"Weekly Max"),r.a.createElement(Pe.a.Control,{type:"text",placeholder:"Weekly Max",defaultValue:L,onChange:function(e){var t=e.target.value;return F(t)}})),r.a.createElement(Pe.a.Group,null,r.a.createElement(Pe.a.Label,null,"Daily Max"),r.a.createElement(Pe.a.Control,{type:"text",placeholder:"Daily Max",defaultValue:W,onChange:function(e){var t=e.target.value;return R(t)}})),r.a.createElement(ne,{onClick:function(){return localStorage.setItem("currentWeeklyMax",L),void localStorage.setItem("currentDailyMax",W)}},"Adjust Hour Maxes")),r.a.createElement(Ae,{todo:function(e){return I(e)}}),r.a.createElement(ne,{style:{align:"left"},onClick:function(e){return function(){var e={};k.forEach((function(t){for(var n,a=t.id,r=Object(i.a)(t,["id"]),o=[],l=0;l<50;)(n=Object(u.a)({},r)).start=new Date(t.start),n.end=new Date(t.end),n.start.setDate(n.start.getDate()+7*l),n.end.setDate(n.end.getDate()+7*l),n.start=n.start.toISOString(),n.end=n.end.toISOString(),n.color="blue",o.push(n),l++;a in e?e[a].shifts=e[a].shifts.concat(o):(e[a]={},e[a]._id=a,e[a].shifts=[].concat(o))}));var t=Object.values(e);J({variables:{users:t}})}()}},"Submit Shifts To Database")),r.a.createElement(ve,{events:k,onSelectEvent:function(e){if(window.confirm("\nDelete this event: Ok - YES, Cancel - NO")){var t=o.indexOf(e),n=Object(s.a)(o);n.splice(t,1),l(n)}},onSelectSlot:function(e){var t=e.start,n=e.end,a=window.prompt("New Event name");a&&l([].concat(Object(s.a)(o),[{title:a,start:t,end:n,color:b&&b.hex}]))},dayPropGetter:me,draggableAccessor:function(e){return!0},onEventDrop:ue,onEventResize:fe}))}},{name:"Account",path:"/account",component:function(e){var t=Object(a.useContext)(M),n=t.user,o=t.setUser,l=Object(a.useState)(n),i=Object(f.a)(l,2),c=i[0],d=i[1],b=Object(a.useState)([]),v=Object(f.a)(b,2),g=v[0],p=v[1],h=Object(a.useState)(qe[1]),E=Object(f.a)(h,2),y=E[0],O=E[1],j=Object(a.useState)("Select"),S=Object(f.a)(j,2),w=S[0],D=S[1],x=Object(a.useState)("Select"),C=Object(f.a)(x,2),k=C[0],I=C[1],$=Object(m.b)(He),U=Object(f.a)($,2),A=U[0],P=U[1],T=P.data,N=P.loading;Object(a.useEffect)((function(){!function(e){var t=[];e.forEach((function(e){var n=e.title,a=e.start,r=e.end,o=e.color,l=e.value,i=new Date(a),c=new Date(r);t.push({title:n,start:i,end:c,color:o,value:l})})),t.sort((function(e,t){return new Date(e.start)-new Date(t.start)})),p(t)}(n.preferences)}),[n]),Object(a.useEffect)((function(){!N&&T&&T.updateUser&&o(T.updateUser)}),[T,N,o]);var _=function(e,t){return r.a.createElement(te,{placeholder:t,type:"text",value:c[e],borderColor:""===c[e]&&"red",onChange:function(t){return function(t){var n=Object(u.a)({},c);n[e]=t,d(n)}(t.target.value)}})};return r.a.createElement(Q,{style:{width:"95%"}},r.a.createElement("div",null,r.a.createElement(Z,{style:{textAlign:"left",position:"flex",fontSize:"3rem"}},"Account Information"),r.a.createElement(ee,null,"Here you can update your account information."),r.a.createElement("br",null),_("firstName","First Name"),_("lastName","Last Name"),r.a.createElement(ne,{style:{display:"block"},onClick:function(){return function(e){var t=e.email,a=e.firstName,r=e.lastName;""===t||""===a||""===r?console.log("Bad Update"):A({variables:{id:n._id,first:a,last:r,email:t}})}(c)}},"Save"),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Z,{style:{fontSize:"3rem",textAlign:"left"}},"Preferences"),r.a.createElement(ne,{style:{align:"left"},onClick:function(){return console.log(g)}},"Log State"),r.a.createElement(ne,{style:{align:"left"},onClick:function(){return function(){var e,t,n=Object(s.a)(g);k.value>2?(e="April ".concat(k.value-2),t="April ".concat(k.value-2)):(e="March ".concat(29+k.value),t="March ".concat(29+k.value)),"Select"===w&&"Select"===k&&k.value===w.value||g.forEach((function(a){var r=a.start,o=a.title,l=a.end,i=a.color,c=a.value;if(r.getDay()===w.value){var s=new Date("".concat(e,", 2020 ").concat(r.getHours(),":").concat(r.getMinutes(),":").concat(r.getSeconds())),u=new Date("".concat(t,", 2020 ").concat(l.getHours(),":").concat(l.getMinutes(),":").concat(l.getSeconds()));n.push({title:o,start:s,end:u,color:i,value:c})}})),p(n)}()}},"Copy"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-evenly"}},r.a.createElement(Ne.a,{options:qe,onChange:function(e){return O(e)},value:y,placeholder:"Select an option"}),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ee,null,"From"),r.a.createElement(Ne.a,{options:Ke,onChange:function(e){return D(e)},value:w,placeholder:"Select an option"})),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(ee,null,"To"),r.a.createElement(Ne.a,{options:Ke,onChange:function(e){return I(e)},value:k,placeholder:"Select an option"})))),r.a.createElement(ne,{style:{align:"left"},onClick:function(e){return Fe>=30&&A({variables:{id:n._id,preferences:g.sort((function(e,t){return new Date(e.start)-new Date(t.start)}))}})}},"Submit To Database"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}}),r.a.createElement(ve,{defaultDate:new Date(2020,2,29),toolbar:!1,formats:{dayFormat:function(e,t,n){return n.format(e,"dddd",t)}},events:g,view:ce.b.WEEK,onSelectEvent:function(e){if(window.confirm("\nDelete this event: Ok - YES, Cancel - NO")){var t=g.indexOf(e),n=Object(s.a)(g);n.splice(t,1),p(n)}},onSelectSlot:function(e){var t=e.start,n=e.end,a="green";-1==y.value?a="red":0==y.value?a="grey":-100==y.value&&(a="darkred"),p([].concat(Object(s.a)(g),[{title:y.label,start:t,end:n,color:a,value:y.value.toString()}]))},draggableAccessor:function(e){return!0},onEventDrop:function(e){var t=e.event,n=e.start,a=e.end,r=t.title,o=t.color,l=t.value;if(window.confirm("\nCopy this event to new day?: Ok - YES, Cancel - NO"))p([].concat(Object(s.a)(g),[{title:r,start:n,end:a,color:o,value:l}]));else{var i=g.filter((function(e){return e!==t}));i.push({title:r,start:n,end:a,color:o,value:l}),p(i)}},onEventResize:function(e){var t=e.event,n=e.start,a=e.end,r=g.indexOf(t),o=t.title,l=t.color,i=t.value,c=Object(s.a)(g);c[r]={title:o,color:l,start:n,end:a,value:i},p(c)}}))))}},{name:"Admin",path:"/Admin",component:function(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)(""),c=Object(f.a)(i,2),s=c[0],u=c[1],d=Object(a.useState)(!1),b=Object(f.a)(d,2),v=b[0],g=b[1],p=Object(a.useState)(""),h=Object(f.a)(p,2),E=h[0],y=h[1],O=Object(a.useState)(""),j=Object(f.a)(O,2),S=j[0],w=j[1],D=Object(a.useState)(""),x=Object(f.a)(D,2),C=x[0],k=x[1],I=Object(a.useState)(!0),$=Object(f.a)(I,2),U=$[0],A=$[1],P=Object(a.useState)(""),T=Object(f.a)(P,2),N=T[0],_=T[1],M=Object(a.useState)(!1),B=Object(f.a)(M,2),L=B[0],z=B[1],F=Object(m.b)(Ge,{onError:function(e){z({title:"Error Creating User!",message:e.message})},onCompleted:function(e){var t=e.createUser;u(""),w(""),k(""),y(""),g("".concat(t.firstName,"'s account has been successfully created!")),l(!1),A(!0)}}),H=Object(f.a)(F,2),G=H[0],W=H[1].loading,R=Object(m.b)(We,{onError:function(e){z({title:"Error Deleting User!",message:e.message})},onCompleted:function(e){var t=e.deleteUser;l(!1),t?(g("User successfully deleted!"),_("")):z({title:"Error Deleting User!",message:"Unable to find a user with that email."})}}),Y=Object(f.a)(R,2),q=Y[0],K=Y[1].loading;Object(a.useEffect)((function(){(W||K)&&l(!0)}),[W,K]);var V=function(){var e=Object(Xe.a)(Je.a.mark((function e(t){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),q({variables:{email:J(N)}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(e){return e.includes("@")?e:"".concat(e,"@islander.tamucc.edu")},X=function(){var e=Object(Xe.a)(Je.a.mark((function e(t){var n,a,r,o;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(S.length<1)){e.next=5;break}z({title:"Cannot Create user.",message:"A first name is required."}),e.next=22;break;case 5:if(!(C.length<1)){e.next=9;break}z({title:"Cannot Create user.",message:"A last name is required."}),e.next=22;break;case 9:return e.prev=9,e.next=12,tt.auth().createUserWithEmailAndPassword(J(s),E);case 12:n=e.sent,a=n.user,r=a.uid,o=a.email,G({variables:{firebaseID:r,first:S,last:C,userType:U?"Employee":"Admin",email:o}}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),z({title:"Error Creating User!",message:e.t0.message});case 22:case"end":return e.stop()}}),e,null,[[9,19]])})));return function(t){return e.apply(this,arguments)}}(),te=function(e){var t=function(){return g(!1)},n="Success!",a=v,o="success";return"error"===e&&(t=function(){return z(!1)},n=L.title,a=L.message,o="danger"),r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:o,onClose:t,dismissible:!0},r.a.createElement(re.a.Heading,null,n),r.a.createElement("p",null,a),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(ne,{onClick:t,variant:"outline-success"},"Okay")))},ae=function(e){var t=e.title,n=e.onChange,a=e.type,o=void 0===a?"text":a,l=e.icon,i=e.autoComplete,c=e.value;return r.a.createElement(Pe.a.Group,{style:{flex:1,display:"flex",flexDirection:"column"}},r.a.createElement(Pe.a.Label,null,t),r.a.createElement(Qe.a,{icon:l,iconPosition:"left",onChange:function(e){var t=e.target.value;return n(t)},type:o,placeholder:"".concat(t,"..."),autoComplete:i,value:c}))};return r.a.createElement(Q,{style:{width:"95%"}},r.a.createElement("div",{style:{width:"80%"}},r.a.createElement(Z,{style:{fontSize:"3.2rem"}}," Admin"),r.a.createElement(ee,null,"Here you may create and delete new Employees or Admin users."),r.a.createElement("br",null),r.a.createElement("br",null),L&&te("error"),v&&te("success"),r.a.createElement("h2",null,"Create"),r.a.createElement(Pe.a,{style:{width:"80%"},onSubmit:function(e){return X(e)}},r.a.createElement(Pe.a.Row,{style:{width:"85%"}},r.a.createElement(at,{containerStyle:{display:"flex",width:"50%",flexDirection:"column"},onChange:function(e){return u(e)},value:s}),ae({title:"Password",autoComplete:"password",icon:"lock",onChange:y,value:E})),r.a.createElement(Pe.a.Row,{style:{display:"flex",flexDirection:"row",width:"85%"}},ae({title:"First Name",icon:"pencil alternate",onChange:w,value:S}),ae({title:"Last Name",icon:"pencil alternate",onChange:k,value:C})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"50%"}},r.a.createElement(Pe.a.Label,null,"User Type"),r.a.createElement(Ze.a.Group,{toggle:!0},r.a.createElement(Ze.a,{type:"button",onClick:function(){return A(!0)},positive:U},"Employee"),r.a.createElement(Ze.a.Or,null),r.a.createElement(Ze.a,{type:"button",onClick:function(){return A(!1)},positive:!U},"Admin")),r.a.createElement(ne,{disabled:o||L,type:"submit"},"Create User"))),r.a.createElement("hr",{height:2,fill:"black"}),r.a.createElement("h2",null,"Delete"),r.a.createElement(Pe.a,{style:{width:"80%"},onSubmit:function(e){return V(e)}},r.a.createElement(at,{containerStyle:{display:"flex",width:"42%",flexDirection:"column"},onChange:function(e){return _(e)},value:N}),r.a.createElement(ne,{disabled:o||L,type:"submit"},"Delete User"))))}},{name:"Logout",path:"/logout",component:function(e){return(0,Object(a.useContext)(M).setUser)(null),localStorage.clear(),e.history.push("/"),r.a.createElement("div",null)}}],ot=n(83),lt=n(232);function it(){var e=Object(a.useContext)(M).user;return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",height:"16vh",width:"100vw",textAlign:"left"}},r.a.createElement(Z,{style:{fontSize:"6rem"}},"Employee Dashboard"),r.a.createElement("div",{style:{flex:1,display:"flex",justifyContent:"space-evenly",alignItems:"center",marginRight:"2vw",fontSize:"2rem"}},r.a.createElement("img",{align:"middle",src:lt,alt:"logo",style:{height:"23vh"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},r.a.createElement(ot.a,{name:"user circle",size:"big"}),r.a.createElement("span",null,e.firstName," ",e.lastName))))}var ct=n(88);function st(){var e=Object(a.useContext)(M).user,t=Object(s.a)(rt);return"Admin"!=e.userType&&(t=t.filter((function(e){var t=e.name;return"Admin"!==t&&"Schedule"!==t}))),r.a.createElement("ul",{className:"Navbar",style:{fontfamily:"Poppins",fontstyle:"normal",fontweight:"normal",height:"100vh",listStyle:"none"}},t.map((function(e){return r.a.createElement("li",null,r.a.createElement(Ze.a.Group,{widths:"4",className:"tags",exact:!0,as:ct.b,to:"".concat(e.path)},r.a.createElement(ae,null,e.name)))})))}var ut=function(e){var t=e.component,n=Object(i.a)(e,["component"]),o=Object(a.useContext)(M).user;return r.a.createElement(c.b,Object.assign({},n,{render:function(e){return o?r.a.createElement("div",null,r.a.createElement(it,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"flex-start"}},r.a.createElement(st,null),r.a.createElement("div",{style:{justifyContent:"center",display:"flex",flex:"auto"}},r.a.createElement(t,e)))):r.a.createElement(c.a,{to:"/"})}}))},ft=n(232);function mt(e){var t=Object(a.useState)(""),n=Object(f.a)(t,2),o=n[0],l=n[1],i=Object(a.useState)(""),c=Object(f.a)(i,2),s=c[0],u=c[1],d=Object(a.useState)(!1),b=Object(f.a)(d,2),v=b[0],g=b[1],p=Object(a.useState)(!1),h=Object(f.a)(p,2),E=h[0],y=h[1],O=Object(a.useState)(!1),j=Object(f.a)(O,2),S=j[0],w=j[1],D=function(e){g(!1),w("You have been clocked ".concat(e))},x=Object(m.b)(Re,{onError:function(e){y({title:"Error Clocking In!",message:e.message})},onCompleted:function(e){e.clockIn;D("in")}}),C=Object(f.a)(x,2),k=C[0],I=C[1].loading,$=Object(m.b)(Ye,{onError:function(e){y({title:"Error Clocking Out!",message:e.message})},onCompleted:function(e){e.clockOut;D("out")}}),U=Object(f.a)($,2),A=U[0],P=U[1].loading,N=Object(m.a)(T,{onError:function(e){g(!1),y({title:"Error Logging In!",message:e.message}),localStorage.clear()},onCompleted:function(t){var n=t.getUserByFirebaseID;if(g(!1),n){var a=n._id,r=n.firebaseID;localStorage.setItem("currentUserID",a),localStorage.setItem("currentUserFirebaseID",r),H(n),e.history.push("/overview")}else y({title:"Error Logging In!",message:"Could not find a user with that ID"}),localStorage.clear()}}),_=Object(f.a)(N,2),B=_[0],L=_[1].loading,z=Object(a.useContext)(M),F=z.user,H=z.setUser,G=function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var n=t.coords,a=n.latitude,r=n.longitude,o={location:"Latitude: ".concat(a,", Longitude: ").concat(r),time:ue()().format("MMMM Do YYYY, h:mm:ss a"),email:W()};"in"===e?k({variables:o}):"out"===e&&A({variables:o})}),(function(t){y({title:"Unable to Clock ".concat(e,"!"),message:t.message})})):y({title:"Unable to Clock ".concat(e,"!"),message:"Geolocation is not supported by your browser"})};Object(a.useEffect)((function(){var t=localStorage.getItem("currentUserFirebaseID");F?e.history.push(rt[0].path):!L&&t&&B({variables:{firebaseID:t}})}),[B,L,e.history,F]),Object(a.useEffect)((function(){g(!!(I||P||L))}),[I,P,L]);var W=function(){return o.includes("@")?o:"".concat(o,"@islander.tamucc.edu")},R=function(){var e=Object(Xe.a)(Je.a.mark((function e(t){var n,a;return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!0),e.prev=2,e.next=5,tt.auth().signInWithEmailAndPassword(W(),s);case 5:n=e.sent,a=n.user.uid,B({variables:{firebaseID:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),y({title:"Error Logging In!",message:e.t0.message});case 13:return e.prev=13,g(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(Xe.a)(Je.a.mark((function e(){return Je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o.length<2)){e.next=3;break}return y({title:"Whoops!",message:"Please enter your username to reset your password."}),e.abrupt("return");case 3:return e.prev=3,e.next=6,tt.auth().sendPasswordResetEmail(W());case 6:w("A link to reset your pasword has been sent to your email!"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),y({title:"Error Resetting Password",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{id:"background",style:{display:"flex",flexDirection:"row",width:"100vw",height:"100vh",justifyContent:"space-around",alignItems:"center"}},r.a.createElement("img",{src:ft,alt:"indays logo",style:{height:"30vh",backgroundColor:"rgba(255, 255, 255, 0.53)",borderRadius:"15vh"}}),E&&r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:"danger",onClose:function(){return y(!1)},dismissible:!0},r.a.createElement(re.a.Heading,null,E.title),r.a.createElement("p",null,E.message),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(ne,{onClick:function(){return y(!1)},variant:"outline-success"},"Okay"))),S&&r.a.createElement(re.a,{style:{position:"absolute",top:"3vh",right:"40vw"},variant:"success",onClose:function(){return w(!1)},dismissible:!0},r.a.createElement(re.a.Heading,null,"Success!"),r.a.createElement("p",null,S),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(ne,{onClick:function(){return w(!1)},variant:"outline-success"},"Okay"))),r.a.createElement(Q,{style:{backgroundColor:"rgba(255, 255, 255, 0.8)"}},r.a.createElement("div",{style:{textAlign:"left",display:"flex",justifyContent:"space-between",flexDirection:"column",width:"30vw"}},r.a.createElement(Z,null," Login"),r.a.createElement(ee,null,"Clock-in with your username",r.a.createElement("br",null),"Log-in with your username and password"),r.a.createElement(Pe.a,{onSubmit:R},r.a.createElement(at,{containerStyle:{display:"flex",width:"62.5%",flexDirection:"column"},onChange:function(e){return l(e)},value:o}),r.a.createElement(Pe.a.Group,{style:{flexDirection:"column",display:"flex"}},r.a.createElement(Pe.a.Label,null,"Password"),r.a.createElement(Qe.a,{icon:"lock",iconPosition:"left",type:"password",placeholder:"Password...",onChange:function(e){var t=e.target.value;return u(t)},autoComplete:"password",style:{width:"62.5%"}}),r.a.createElement("u",{onClick:Y},"Forgot Password?")),r.a.createElement(ne,{disabled:v||E,type:"submit"},"Login")),r.a.createElement(ne,{disabled:v||E,onClick:function(){return G("in")}},"Clock In"),r.a.createElement(ne,{disabled:v||E,onClick:function(){return G("out")}},"Clock Out"))))}ue.a.locale("en");n(466);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var dt=n(41),bt=new b.a({uri:"https://bookworms-api.herokuapp.com/graphql"});l.a.render(r.a.createElement(dt.a,{client:bt},r.a.createElement(ct.a,null,r.a.createElement((function(){return r.a.createElement(B,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:mt}),rt.map((function(e){return r.a.createElement(ut,{exact:!0,path:"".concat(e.path),component:e.component})})),r.a.createElement(c.b,{path:"*",component:mt})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[262,1,2]]]);
//# sourceMappingURL=main.321d2f03.chunk.js.map